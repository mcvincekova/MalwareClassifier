from sklearn.model_selection import RandomizedSearchCV


class RandomizedSearchCrossValidator:
    """
    Stores the data needed for the instance of RandomizedSearchCV with default:
    number of cv = 3
    number of iterations = 50
    """

    def __init__(self, estimator, parameter_distribution):
        self.estimator = estimator
        self.param_distribution = parameter_distribution
        self.n_iter = 50
        self.cv = 3
        self.verbose = 1
        self.n_jobs = -1

    def set_log_setting(self, log_setting):
        self.verbose = log_setting

    def set_workers(self, workers_count):
        self.n_jobs = workers_count

    def get_validator(self):
        """
        Return RandomizedSearchCV instance that uses parameters of RandomizedSearchCrossValidator.
        :return: instance of RandomizedSearchCV
        """
        rfc_random = RandomizedSearchCV(
            estimator=self.estimator,
            param_distributions=self.param_distribution,
            n_iter=self.n_iter,
            cv=self.cv,
            verbose=self.verbose,
            n_jobs=self.n_jobs
        )

        return rfc_random
